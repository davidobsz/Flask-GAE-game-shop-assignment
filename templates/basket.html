{% extends "base.html" %}
{% set active_page = "basket" %}
{% block content %}
    <script type="text/javascript">
        document.getElementById("true-false").innerHTML = sessionStorage.getItem("email")

        if (sessionStorage.getItem("email") == null){
        document.getElementById("sign-out-li").style.visibility = "hidden"
    }
    </script>
 <div class="products"> <div class="product"><ul id="basket-ul">{% for i in response["items"] %}
        <li class="{{ i.email }}">{{ i.product }}<br>
         <form method="post">
            <input style="visibility: hidden" name="email" value="{{ i.email }}">
            <input style="visibility: hidden" name="product" value ={{ i.product }}>
            <button class="button" type="submit">Delete</button>
        </form>
     </li>
 {% endfor %}
 </ul>
 </div>
 </div>

    <div id="checkout">
        <h3>Checkout Here</h3>
        <form method="post" action="/checkout">
            <button type="submit">Checkout</button>
        </form>
    </div>

{#    <p>{{ response["items"][0].email }}</p>#}
{#    {% for i in response["items"] %}#}
{#        <p class="{{ i.email }}">{{ i.product }}</p>#}
{#    {% endfor %}#}


<script>
var basket_items = document.getElementById("basket-ul")
var email = document.getElementById("true-false").innerHTML = sessionStorage.getItem("email")
console.log("shown below")
console.log(email, "email")




const ul = document.querySelector('#basket-ul');
{##}
{#// Get all the li elements within the ul element#}
const lis = ul.querySelectorAll('li');

// Loop through each li element
lis.forEach(li => {

    // If the li element has a class of "x", show it
    if (li.classList.contains(`${email}`)) {
        li.style.display = 'block';

    }
    // If the li element has a class of "y", hide it
    else {
        li.style.display = 'none';
    }
});

</script>
{% endblock %}






